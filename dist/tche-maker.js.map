{"version":3,"sources":["tche-maker.js"],"names":[],"mappings":"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","file":"tche-maker.js","sourcesContent":["class BAH {\r\n    static log(msg) { console.log(msg); }\r\n    static error(msg) { console.error(msg); }\r\n}\r\nvar TCHE = {\r\n  globals : {},\r\n  data : {},\r\n  maps : {}\r\n};\r\n\r\n(function($){\r\n  /*jshint validthis: true */\r\n  \"use strict\";\r\n\r\n  function _defaultGetter(name) {\r\n    return function () {\r\n      return this['_' + name];\r\n    };\r\n  }\r\n\r\n  function _defaultSetter(name) {\r\n    return function (value) {\r\n      var prop = '_' + name;\r\n      if ((!this[prop]) || this[prop] !== value) {\r\n        this[prop] = value;\r\n        if (this._refresh) {\r\n          this._refresh();\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  function ajaxLoadFile(filePath, mimeType) {\r\n    mimeType = mimeType || \"application/json\";\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\",filePath,false);\r\n    if (mimeType && xhr.overrideMimeType) {\r\n      xhr.overrideMimeType(mimeType);\r\n    }\r\n    xhr.send();\r\n    if (xhr.status <= 200 || xhr.status == 304) {\r\n      return xhr.responseText;\r\n    }\r\n    else {\r\n      throw new Error(\"Cannot load file \" + filePath);\r\n    }\r\n  }\r\n\r\n  function ajaxLoadFileAsync(name, filePath, onLoad, onError, mimeType){\r\n    mimeType = mimeType || \"application/json\";\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open('GET', filePath);\r\n    if (mimeType && xhr.overrideMimeType) {\r\n      xhr.overrideMimeType(mimeType);\r\n    }\r\n    if(onLoad === undefined){\r\n      onLoad = function(xhr, filePath, name) {\r\n        if (xhr.status < 400) {\r\n          TCHE.data[name] = JSON.parse(xhr.responseText);\r\n        }\r\n      };\r\n    }\r\n    xhr.onload = function() {\r\n      onLoad.call(this, xhr, filePath, name);\r\n    };\r\n    xhr.onerror = onError;\r\n    if(onLoad !== undefined){\r\n      TCHE.data[name] = null;\r\n    }\r\n    xhr.send();\r\n  }\r\n\r\n  function extend(/*parent , constructor */) {\r\n    var constructor, parent;\r\n    parent = arguments.length > 0 ? arguments[0] : Object;\r\n    constructor = arguments.length > 1 ? arguments[1] : function () {\r\n      parent.apply(this, arguments);\r\n      if(!parent.prototype.initialize && this.initialize) {\r\n        this.initialize.apply(this, arguments);\r\n      }\r\n    };\r\n\r\n    constructor.prototype = Object.create(parent.prototype);\r\n    constructor.prototype.constructor = constructor;\r\n    constructor.prototype.parentClass = parent.prototype;\r\n\r\n    constructor.extend = function (/* constructor*/) {\r\n      if (arguments.length) {\r\n        return $.extend(constructor, arguments[0]);\r\n      }\r\n      return $.extend(constructor, function () {\r\n        constructor.apply(this, arguments);\r\n      });\r\n    };\r\n    return constructor;\r\n  }\r\n\r\n  function _declareClass(className /*, parent, content*/) {\r\n    var parent = Object;\r\n    var content;\r\n    var classObj;\r\n\r\n    if (arguments.length > 2) {\r\n      parent = arguments[1];\r\n      content = arguments[2];\r\n    } else if (arguments.length > 1) {\r\n      parent = arguments[1];\r\n    }\r\n\r\n    classObj = TCHE.extend(parent);\r\n\r\n    if (!!content) {\r\n      for (var key in content) {\r\n        if (content.hasOwnProperty(key)) {\r\n          classObj.prototype[key] = content[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    TCHE[className] = classObj;\r\n    return classObj;\r\n  }\r\n\r\n  function declareClass(className /*, parent, content*/) {\r\n    return this.trigger(_declareClass.apply(this, arguments).prototype);\r\n  }\r\n\r\n  function declareStaticClass(className) {\r\n    return this.trigger(_declareClass(className));\r\n  }\r\n\r\n  function reader(obj, name /*, getter */) {\r\n    Object.defineProperty(obj, name, {\r\n      get: arguments.length > 2 ? arguments[2] : _defaultGetter(name),\r\n      configurable: true\r\n    });\r\n  }\r\n\r\n  function writer(obj, name /*, setter*/) {\r\n    Object.defineProperty(obj, name, {\r\n      set: arguments.length > 2 ? arguments[2] : _defaultSetter(name),\r\n      configurable: true\r\n    });\r\n  }\r\n\r\n  function accessor(value, name /* , setter, getter */) {\r\n    Object.defineProperty(value, name, {\r\n      get: arguments.length > 3 ? arguments[3] : _defaultGetter(name),\r\n      set: arguments.length > 2 ? arguments[2] : _defaultSetter(name),\r\n      configurable: true\r\n    });\r\n  }\r\n\r\n  function deepClone(obj) {\r\n    var result;\r\n    if (obj instanceof Array) {\r\n      return obj.map(function (i) { return $.deepClone(i); });\r\n    } else if (obj && !obj.prototype && (typeof obj == 'object' || obj instanceof Object)) {\r\n      result = {};\r\n      for (var p in obj) {\r\n        result[p] = $.deepClone(obj[p]);\r\n      }\r\n      return result;\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  function shallowClone(obj) {\r\n    var result;\r\n    if (obj instanceof Array) {\r\n      return obj.slice(0);\r\n    } else if (obj && !obj.prototype && (typeof obj == 'object' || obj instanceof Object)) {\r\n      result = {};\r\n      for (var p in obj) {\r\n        result[p] = obj[p];\r\n      }\r\n      return result;\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  function fillSettings(settings) {\r\n    settings.screenWidth = settings.screenWidth || 800;\r\n    settings.screenHeight = settings.screenHeight || 600;\r\n    settings.backgroundColor = settings.backgroundColor || 0x1099bb;\r\n\r\n    settings.showFps = settings.showFps !== false;\r\n    settings.fpsVisibleOnStartup = settings.fpsVisibleOnStartup === true;\r\n\r\n    // settings.initialScene = settings.initialScene || null;\r\n    settings.playerX = settings.playerX || 0;\r\n    settings.playerY = settings.playerY || 0;\r\n    settings.initialMap = settings.initialMap || null;\r\n\r\n    // settings.sceneParams = settings.sceneParams || {};\r\n\r\n    TCHE.settings = settings;\r\n  }\r\n\r\n  function createGlobals(){\r\n    TCHE.globals.player = new TCHE.Player();\r\n    TCHE.globals.map = new TCHE.Map();\r\n  }\r\n\r\n  function setupFpsMeter(){\r\n    if (TCHE.settings.showFps) {\r\n      TCHE.meter = new FPSMeter({theme : 'transparent', graph : 1, decimals : 0});\r\n\r\n      if (!TCHE.settings.fpsVisibleOnStartup) {\r\n        TCHE.meter.hide();\r\n      }\r\n\r\n      TCHE.InputManager.on(\"FPS\", function (argument) {\r\n        return TCHE.meter.isPaused ? TCHE.meter.show() : TCHE.meter.hide();\r\n      });\r\n    }\r\n  }\r\n\r\n  function init(settings) {\r\n    TCHE.fillSettings(settings);\r\n\r\n    TCHE.renderer = PIXI.autoDetectRenderer(settings.screenWidth, settings.screenHeight, {backgroundColor : settings.backgroundColor});\r\n    document.body.appendChild(TCHE.renderer.view);\r\n\r\n    setupFpsMeter();\r\n    createGlobals();\r\n\r\n    TCHE.SceneManager.start(TCHE.SceneLaunch);\r\n    TCHE.fire(\"ready\");\r\n  }\r\n\r\n  function startFrame(){\r\n    if (!!TCHE.meter) {\r\n      TCHE.meter.tickStart();\r\n    }\r\n  }\r\n\r\n  function endFrame(){\r\n    if (!!TCHE.meter) {\r\n      TCHE.meter.tick();\r\n    }\r\n  }\r\n\r\n  $.trigger = Trigger;\r\n  $.fillSettings = fillSettings;\r\n  $.ajaxLoadFile = ajaxLoadFile;\r\n  $.ajaxLoadFileAsync = ajaxLoadFileAsync;\r\n  $.extend = extend;\r\n  $.declareClass = declareClass;\r\n  $.declareStaticClass = declareStaticClass;\r\n  $.reader = reader;\r\n  $.writer = writer;\r\n  $.accessor = accessor;\r\n  $.shallowClone = shallowClone;\r\n  $.deepClone = deepClone;\r\n  $.init = init;\r\n  $.startFrame = startFrame;\r\n  $.endFrame = endFrame;\r\n\r\n  $.trigger(TCHE);\r\n})(TCHE);\r\nfunction Trigger(el) {\r\n  el._listeners = {};\r\n\r\n  el.on = el.addListener = function(type, listener) {\r\n    if (typeof this._listeners[type] == \"undefined\") {\r\n      this._listeners[type] = [];\r\n    }\r\n\r\n    this._listeners[type].push(listener);\r\n  };\r\n\r\n  el.fire = function(event) {\r\n    event = event || {};\r\n    if (typeof event == \"string\") {\r\n      event = {\r\n        type: event\r\n      };\r\n    }\r\n    if (!event.target) {\r\n      event.target = this;\r\n    }\r\n\r\n    if (!event.type) { //falsy\r\n      throw new Error(\"Event object missing 'type' property.\");\r\n    }\r\n\r\n    if (this._listeners[event.type] instanceof Array) {\r\n      var listeners = this._listeners[event.type];\r\n      for (var i = 0, len = listeners.length; i < len; i++) {\r\n        listeners[i].call(this, event);\r\n      }\r\n    }\r\n  };\r\n\r\n  el.removeListener = function(type, listener) {\r\n    if (this._listeners[type] instanceof Array) {\r\n      var listeners = this._listeners[type];\r\n      for (var i = 0, len = listeners.length; i < len; i++) {\r\n        if (listeners[i] === listener) {\r\n          listeners.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n  return el;\r\n}\r\n(function($) {\r\n  \"use strict\";\r\n  $.STEP = 5;\r\n  $.STEP_WALKING = 3;\r\n  $.STEP_RUNNING = 5;\r\n\r\n  $.changeImage = function(image) {\r\n    this._image = image;\r\n    this._dirty = true;\r\n  };\r\n\r\n  TCHE.accessor($, 'x');\r\n  TCHE.accessor($, 'y');\r\n  TCHE.accessor($, 'xDest');\r\n  TCHE.accessor($, 'yDest');\r\n  TCHE.accessor($, 'direction');\r\n  TCHE.accessor($, 'image', $.changeImage);\r\n  TCHE.accessor($, 'dirty');\r\n\r\n  $.initialize = function() {\r\n\r\n  };\r\n\r\n  $.setDest = function(x, y) {\r\n    this._xDest = x;\r\n    this._yDest = y;\r\n  };\r\n\r\n  $.update = function() {\r\n    var direction = {\r\n      \"x\": [\"right\", \"left\"],\r\n      \"y\": [\"down\", \"up\"]\r\n    };\r\n\r\n    this.move(Object.keys(direction).reduce(function(old, val) {\r\n      var dest = this[\"_\" + val + \"Dest\"];\r\n      if (dest) {\r\n        var pos = this[\"_\" + val];\r\n        if (Math.abs(dest - pos) >= this.STEP) {\r\n          old.push(dest > pos ? direction[val][0] : direction[val][1]);\r\n        } else {\r\n          this[\"_\" + val + \"Dest\"] = undefined;\r\n        }\r\n      }\r\n      return old;\r\n    }.bind(this), []).join(\" \"));\r\n\r\n  };\r\n\r\n  $.move = function(direction) {\r\n\r\n\r\n    if (direction.indexOf('left') >= 0) {\r\n      this._x -= this.STEP;\r\n    } else if (direction.indexOf('right') >= 0) {\r\n      this._x += this.STEP;\r\n    }\r\n\r\n    if (direction.indexOf('up') >= 0) {\r\n      this._y -= this.STEP;\r\n    } else if (direction.indexOf('down') >= 0) {\r\n      this._y += this.STEP;\r\n    }\r\n  };\r\n\r\n\r\n})(TCHE.declareClass('Character'));\r\n(function($){\r\n  \"use strict\";\r\n\r\n  var parent = PIXI.Container;\r\n\r\n  //The sprite property of the Sprite class is a PIXI sprite.\r\n  TCHE.accessor($, 'sprite');\r\n\r\n  $.initialize = function(){\r\n    this._sprite = null;\r\n  };\r\n\r\n})(TCHE.declareClass('Sprite', PIXI.Container));(function($){\r\n  \"use strict\";\r\n\r\n  var parent = TCHE.Sprite.prototype;\r\n\r\n  TCHE.accessor($, 'character');\r\n\r\n  $.initialize = function(character) {\r\n    parent.initialize.call(this);\r\n    this._character = character;\r\n    this.createPixiSprite();\r\n  };\r\n\r\n  $.createPixiSprite = function() {\r\n    if (this._character.dirty) {\r\n      this._texture = null;\r\n      if (!!this._sprite) {\r\n        this._sprite.texture = null;\r\n      }\r\n    }\r\n\r\n    if (!this._texture && !!this._character.image) {\r\n      this._texture = PIXI.Texture.fromImage(this._character.image);\r\n    }\r\n\r\n    if (!this._sprite && !!this._texture) {\r\n      this._sprite = new PIXI.Sprite(this._texture);\r\n      this.addChild(this._sprite);\r\n    }\r\n\r\n    if (!!this._sprite && !!this._texture && this._sprite._texture != this._texture) {\r\n      this._sprite.texture = this._texture;\r\n    }\r\n\r\n    this._character.dirty = false;\r\n  };\r\n\r\n  $.update = function() {\r\n    //Makes sure the sprite exists\r\n    this.createPixiSprite();\r\n\r\n    if (!this._sprite) return;\r\n\r\n    //Syncs the position\r\n    this.position.x = this._character.x;\r\n    this.position.y = this._character.y;\r\n  };\r\n})(TCHE.declareClass('CharacterSprite', TCHE.Sprite));(function($){\r\n  \"use strict\";\r\n\r\n  var parent = TCHE.Sprite.prototype;\r\n\r\n  TCHE.accessor($, 'map');\r\n\r\n  $.initialize = function(map) {\r\n    parent.initialize.call(this);\r\n    this._map = map;\r\n  };\r\n\r\n  $.update = function() {\r\n  };\r\n})(TCHE.declareClass('MapSprite', TCHE.Sprite));(function($){\r\n  \"use strict\";\r\n\r\n  var parent = TCHE.MapSprite.prototype;\r\n\r\n  $.initialize = function(map) {\r\n    parent.initialize.call(this, map);\r\n\r\n    this._backgroundGraphic = new PIXI.Graphics();\r\n    this._backgroundGraphic.beginFill(map._mapData[\"background-color\"]);\r\n    this._backgroundGraphic.drawRect(0, 0, TCHE.renderer.width, TCHE.renderer.height);\r\n    this._backgroundGraphic.endFill();\r\n\r\n    this._backgroundTexture = new PIXI.RenderTexture(TCHE.renderer, TCHE.renderer.width, TCHE.renderer.height);\r\n    this._backgroundTexture.render(this._backgroundGraphic);\r\n\r\n    this._backgroundSprite = new PIXI.Sprite(this._backgroundTexture);\r\n\r\n    this.addChild(this._backgroundSprite);\r\n\r\n    this._playerSprite = new TCHE.CharacterSprite(TCHE.globals.player);\r\n    this.addChild(this._playerSprite);\r\n  };\r\n\r\n  $.update = function() {\r\n    parent.update.call(this);\r\n\r\n    this._playerSprite.update();\r\n  };\r\n})(TCHE.declareClass('Map2d', TCHE.MapSprite));(function($){\r\n  \"use strict\";\r\n\r\n  $._startedLoadingMaps = false;\r\n  $._loading = 0;\r\n\r\n  $._loadGameSettings = function() {\r\n    var path = './game.json';\r\n\r\n    TCHE.ajaxLoadFileAsync('game', path);\r\n  };\r\n\r\n  $._loadAllMaps = function() {\r\n    if (!TCHE.data.game) return;\r\n\r\n    var maps = TCHE.data.game.maps;\r\n\r\n    maps.forEach(function(mapName){\r\n      $._loadMapData(mapName);\r\n    });\r\n  };\r\n\r\n  $._loadMapData = function(mapName) {\r\n    var path = './maps/' + mapName + '.json';\r\n    $._loading++;\r\n\r\n    TCHE.maps[mapName] = null;\r\n    TCHE.ajaxLoadFileAsync(mapName, path, function(xhr, filePath, name){\r\n      if (xhr.status < 400) {\r\n        TCHE.maps[name] = JSON.parse(xhr.responseText);\r\n        $._loading--;\r\n      } else {\r\n        console.log(arguments);\r\n        throw new Error(\"Failed to load map.\");\r\n      }\r\n    }, function(){\r\n      console.log(arguments);\r\n      throw new Error(\"Failed to load map.\");\r\n    });\r\n  };\r\n\r\n  $.update = function(){\r\n    if (!TCHE.data.game) {\r\n      if (TCHE.data.game === undefined) {\r\n        $._loadGameSettings();\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    if (!$._startedLoadingMaps) {\r\n      $._startedLoadingMaps = true;\r\n      $._loadAllMaps();\r\n    }\r\n  };\r\n\r\n  $.isLoaded = function(){\r\n    if (!TCHE.data.game) return false;\r\n    if (!$._startedLoadingMaps) return false;\r\n    if ($._loading > 0) return false;\r\n\r\n    return true;\r\n  };\r\n})(TCHE.declareStaticClass('FileManager'));(function($){\r\n  \"use strict\";\r\n\r\n  $.update = function(){\r\n\r\n  };\r\n\r\n  $.loadGameSettings = function(){\r\n    \r\n  };\r\n})(TCHE.declareStaticClass('GameManager'));(function($) {\r\n  \"use strict\";\r\n\r\n  $.keys = {\r\n    9: 'tab', // tab\r\n    13: 'ok', // enter\r\n    16: 'shift', // shift\r\n    17: 'control', // control\r\n    18: 'control', // alt\r\n    27: 'escape', // escape\r\n    32: 'ok', // space\r\n    33: 'pageup', // pageup\r\n    34: 'pagedown', // pagedown\r\n    37: 'left', // left arrow\r\n    38: 'up', // up arrow\r\n    39: 'right', // right arrow\r\n    40: 'down', // down arrow\r\n    45: 'escape', // insert\r\n\r\n    65: 'left', // A\r\n    83: 'down', // S\r\n    68: 'right', // D\r\n    87: 'up', // W\r\n\r\n    74: 'ok', // J\r\n    75: 'shift', // K\r\n    85: 'tool', // U\r\n    // 73: 'I', // I\r\n\r\n    81: 'pageup', // Q\r\n    69: 'pagedown', // E\r\n\r\n    // 76: 'L', // L,\r\n    // 79: 'O', // O,\r\n\r\n    // 88: 'escape', // X\r\n    // 90: 'ok', // Z\r\n    96: 'escape', // numpad 0\r\n    98: 'down', // numpad 2\r\n    100: 'left', // numpad 4\r\n    102: 'right', // numpad 6\r\n    104: 'up', // numpad 8\r\n\r\n    113 : 'F2'\r\n  };\r\n\r\n  $.keyAliases = {};\r\n\r\n  $.keyStates = {};\r\n  $.previousKeyStates = {};\r\n  $.triggeredKeys = [];\r\n  $.releasedKeys = [];\r\n\r\n  $.update = function(){\r\n    $.triggeredKeys = [];\r\n    $.releasedKeys = [];\r\n\r\n    for (var key in $.keyStates) {\r\n      if ($.keyStates[key] === $.previousKeyStates[key]) continue;\r\n\r\n      if ($.keyStates[key]) {\r\n        $.triggeredKeys.push(key);\r\n      } else {\r\n        $.releasedKeys.push(key);\r\n      }\r\n    }\r\n\r\n    $.previousKeyStates = TCHE.shallowClone($.keyStates);\r\n\r\n    for (var i = 0; i < $.triggeredKeys.length; i++) {\r\n      var names = $.getKeyNames($.triggeredKeys[i]);\r\n\r\n      for (var j = 0; j < names.length; j++) {\r\n        this.fire(names[j], {});\r\n      }\r\n    }\r\n  };\r\n\r\n  $.addKeyCode = function(code, name) {\r\n    this.keys[code] = name;\r\n  };\r\n\r\n  $.addKeyAlias = function(keyName, keyAlias) {\r\n    $.keyAliases[keyName] = $.keyAliases[keyName] || [];\r\n    $.keyAliases[keyName].push(keyAlias);\r\n  };\r\n\r\n  $.isKeyCodePressed = function(keyCode) {\r\n    return !!$.keyStates[keyCode];\r\n  };\r\n\r\n  $.isKeyCodeTriggered = function(keyCode) {\r\n    return $.triggeredKeys.indexOf(keyCode) >= 0;\r\n  };\r\n\r\n  $.isKeyCodeReleased = function(keyCode) {\r\n    return $.releasedKeys.indexOf(keyCode) >= 0;\r\n  };\r\n\r\n  $.getKeyCodes = function(keyName) {\r\n    var codes = [];\r\n\r\n    for (var key in $.keys) {\r\n      if ($.keys.hasOwnProperty(key)) {\r\n        if ($.keys[key].toUpperCase() == keyName.toUpperCase()) {\r\n          codes.push(key);\r\n          continue;\r\n        }\r\n\r\n        var thisKeyName = $.keys[key];\r\n        if (!!$.keyAliases[thisKeyName] && $.keyAliases[thisKeyName].indexOf(keyName) >= 0) {\r\n          codes.push(key);\r\n        }\r\n      }\r\n    }\r\n\r\n    return codes;\r\n  };\r\n\r\n  $.getKeyNames = function(keyCode) {\r\n    var names = [];\r\n\r\n    if (!!$.keys[keyCode]) {\r\n      var name = $.keys[keyCode];\r\n      \r\n      names.push(name);\r\n\r\n      if (!!$.keyAliases[name]) {\r\n        names = names.concat($.keyAliases[name]);\r\n      }\r\n    }\r\n\r\n    return names;\r\n  };\r\n\r\n  $.isKeyNamePressed = function(keyName) {\r\n    var codes = $.getKeyCodes(keyName);\r\n\r\n    return codes.find(function(key){\r\n      return $.isKeyCodePressed(key);\r\n    }) || false;\r\n  };\r\n\r\n  $.isKeyNameReleased = function(keyName) {\r\n    var codes = $.getKeyCodes(keyName);\r\n\r\n    return codes.find(function(key){\r\n      return $.isKeyCodeReleased(key);\r\n    }) || false;\r\n  };\r\n\r\n  $.isKeyNameTriggered = function(keyName) {\r\n    var codes = $.getKeyCodes(keyName);\r\n\r\n    return codes.find(function(key){\r\n      return $.isKeyCodeTriggered(key);\r\n    }) || false;\r\n  };\r\n\r\n  $.isKeyPressed = function(keyCodeOrName) {\r\n    if (typeof(keyCodeOrName) == \"string\") {\r\n      return $.isKeyNamePressed(keyCodeOrName);\r\n    } else {\r\n      return $.isKeyCodePressed(keyCodeOrName);\r\n    }\r\n  };\r\n\r\n  $.isKeyTriggered = function(keyCodeOrName) {\r\n    if (typeof(keyCodeOrName) == \"string\") {\r\n      return $.isKeyNameTriggered(keyCodeOrName);\r\n    } else {\r\n      return $.isKeyCodeTriggered(keyCodeOrName);\r\n    }\r\n  };\r\n\r\n  $.isKeyReleased = function(keyCodeOrName) {\r\n    if (typeof(keyCodeOrName) == \"string\") {\r\n      return $.isKeyNameReleased(keyCodeOrName);\r\n    } else {\r\n      return $.isKeyCodeReleased(keyCodeOrName);\r\n    }\r\n  };\r\n\r\n  $.getPressedKeys = function(keys) {\r\n    return Object.keys($.keys).filter(function(key) {\r\n      return $.isKeyCodePressed(key);\r\n    });\r\n  };\r\n\r\n  $.getFirstDirection = function() {\r\n    return ['left', 'right', 'up', 'down'].find(function(direction) {\r\n      return $.isKeyNamePressed(direction);\r\n    }) || '';\r\n  };\r\n\r\n  $.getDirection = function() {\r\n    return ['left', 'right', 'up', 'down'].filter(function(direction) {\r\n      return $.isKeyNamePressed(direction);\r\n    }).join('-');\r\n  };\r\n\r\n  $.onKeyDown = function(event) {\r\n    if ($.isBlockedKey(event.keyCode)) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    $.keyStates[event.keyCode] = true;\r\n  };\r\n\r\n  $.onKeyUp = function(event) {\r\n    $.keyStates[event.keyCode] = false;\r\n  };\r\n\r\n  $.onWindowBlur = function() {\r\n    $.clear();\r\n  };\r\n\r\n  $.clear = function() {\r\n    $.keyStates = {};\r\n  };\r\n\r\n  $.isBlockedKey = function(keyCode) {\r\n    switch (keyCode) {\r\n      case 8: // backspace\r\n      case 33: // pageup\r\n      case 34: // pagedown\r\n      case 37: // left arrow\r\n      case 38: // up arrow\r\n      case 39: // right arrow\r\n      case 40: // down arrow\r\n        return true;\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  document.addEventListener('keydown', $.onKeyDown.bind($));\r\n  document.addEventListener('keyup', $.onKeyUp.bind($));\r\n  window.addEventListener('blur', $.onWindowBlur.bind($));\r\n\r\n  TCHE.on(\"ready\", function() {\r\n    TCHE.renderer.view.addEventListener(\"click\", function(evt) {\r\n\r\n      var tmp = getMousePos(this, evt);\r\n\r\n      TCHE.globals.player.setDest(tmp.x, tmp.y);\r\n    });\r\n  });\r\n\r\n  function getMousePos(canvas, evt) {\r\n    var rect = canvas.getBoundingClientRect();\r\n    return {\r\n      x: evt.clientX - rect.left,\r\n      y: evt.clientY - rect.top\r\n    };\r\n  }\r\n\r\n\r\n})(TCHE.declareStaticClass('InputManager'));\r\n(function($){\r\n  \"use strict\";\r\n\r\n  $._scene = null;\r\n\r\n  $.requestAnimationFrame = function(){\r\n    window.requestAnimationFrame($.update.bind($));\r\n  };\r\n\r\n  $._doSceneChange = function() {\r\n    if ($._newScene !== undefined) {\r\n      if (!!$._scene) {\r\n        $._scene.terminate();\r\n        $._scene = undefined;\r\n      }\r\n\r\n      if (!!$._newScene) {\r\n        $._scene = new ($._newScene)();\r\n      }\r\n    }\r\n\r\n    $._newScene = undefined;\r\n  };\r\n\r\n  $.update = function(){\r\n    TCHE.startFrame();\r\n\r\n    $._doSceneChange();\r\n\r\n    TCHE.FileManager.update();\r\n    TCHE.InputManager.update();\r\n\r\n    TCHE.globals.map.update();\r\n    TCHE.globals.player.update();\r\n\r\n    if (!!$._scene) {\r\n      $._scene.update();\r\n\r\n      TCHE.renderer.render($._scene);\r\n    }\r\n\r\n    TCHE.endFrame();\r\n\r\n    //If there's no active scene, then end the game\r\n    if (!!$._scene) {\r\n      $.requestAnimationFrame();\r\n    }\r\n  };\r\n\r\n  $.changeScene = function(newScene){\r\n    $._newScene = newScene;\r\n  };\r\n\r\n  $.start = function(initialScene) {\r\n    $.changeScene(initialScene);\r\n    $.requestAnimationFrame();\r\n  };\r\n\r\n  $.end = function() {\r\n    $.changeScene(null);\r\n  };\r\n\r\n})(TCHE.declareStaticClass('SceneManager'));(function($){\r\n  \"use strict\";\r\n\r\n  $.initialize = function(){\r\n    PIXI.Container.call(this);\r\n  };\r\n\r\n  $.terminate = function(){\r\n\r\n  };\r\n\r\n  $.update = function(){\r\n\r\n\r\n  };\r\n})(TCHE.declareClass('Scene', PIXI.Container));(function($){\r\n  \"use strict\";\r\n\r\n  var parent = TCHE.Scene.prototype;\r\n\r\n  $.createBackground = function() {\r\n    this._backgroundGraphic = new PIXI.Graphics();\r\n    this._backgroundGraphic.beginFill(\"0xCCCCCC\");\r\n    this._backgroundGraphic.drawRect(0, 0, TCHE.renderer.width, TCHE.renderer.height);\r\n    this._backgroundGraphic.endFill();\r\n\r\n    this._backgroundTexture = new PIXI.RenderTexture(TCHE.renderer, TCHE.renderer.width, TCHE.renderer.height);\r\n    this._backgroundTexture.render(this._backgroundGraphic);\r\n\r\n    this._backgroundSprite = new PIXI.Sprite(this._backgroundTexture);\r\n\r\n    this.addChild(this._backgroundSprite);\r\n  };\r\n\r\n  $.createMessage = function() {\r\n    this._messageText = \"Now Loading\";\r\n\r\n    this._messageSprite = new PIXI.Text(this._messageText);\r\n    this._messageSprite.anchor.x = 0;\r\n    this._messageSprite.anchor.y = 0.5;\r\n    this._messageSprite.position.y = Math.floor(TCHE.renderer.height / 2);\r\n    this._messageSprite.position.x = Math.floor(TCHE.renderer.width / 2 - this._messageSprite.width / 2);\r\n\r\n    this.addChild(this._messageSprite);\r\n\r\n    this._dots = 0;\r\n    this._counter = 0;\r\n  };\r\n\r\n  $.updateBackground = function() {\r\n\r\n  };\r\n\r\n  $.updateMessage = function() {\r\n    this._counter++;\r\n\r\n    if (this._counter > 20) {\r\n      this._counter = 0;\r\n      this._dots++;\r\n\r\n      if (this._dots > 3) {\r\n        this._dots = 0;\r\n      }\r\n\r\n      var string = this._messageText;\r\n      for (var i = 0; i < this._dots; i++) {\r\n        string += \".\";\r\n      }\r\n\r\n      this._messageSprite.text = string;\r\n    }\r\n  };\r\n\r\n  $.initialize = function() {\r\n    parent.initialize.call(this);\r\n\r\n    this.createBackground();\r\n    this.createMessage();\r\n  };\r\n\r\n  $.update = function() {\r\n    parent.update.call(this);\r\n\r\n    this.updateBackground();\r\n    this.updateMessage();\r\n  };\r\n})(TCHE.declareClass('SceneLoading', TCHE.Scene));(function($){\r\n  \"use strict\";\r\n\r\n  var parent = TCHE.SceneLoading.prototype;\r\n\r\n  $.initialize = function() {\r\n    parent.initialize.call(this);\r\n  };\r\n\r\n  $.update = function() {\r\n    parent.update.call(this);\r\n\r\n    if (TCHE.FileManager.isLoaded()) {\r\n      TCHE.SceneManager.changeScene(TCHE.SceneMap);\r\n    }\r\n  };\r\n})(TCHE.declareClass('SceneLaunch', TCHE.SceneLoading));(function($){\r\n  \"use strict\";\r\n  var parent = TCHE.Scene.prototype;\r\n\r\n  $.initialize = function(){\r\n    parent.initialize.call(this);\r\n\r\n    TCHE.globals.player._x = TCHE.data.game.player.x;\r\n    TCHE.globals.player._y = TCHE.data.game.player.y;\r\n    TCHE.globals.player._image = TCHE.data.game.player.image;\r\n\r\n\r\n    TCHE.globals.map.loadMap(TCHE.data.game.initialMap);\r\n\r\n    this._mapSprite = new TCHE.Map2d(TCHE.globals.map);\r\n    this.addChild(this._mapSprite);\r\n  };\r\n\r\n  $.update = function(){\r\n    parent.update.call(this);\r\n\r\n    this._mapSprite.update();\r\n\r\n    // this._playerSprite.update();\r\n  };\r\n\r\n  $.terminate = function(){\r\n    parent.terminate.call(this);\r\n  };\r\n})(TCHE.declareClass('SceneMap', TCHE.Scene));(function($){\r\n  \"use strict\";\r\n\r\n  $.initialize = function(){\r\n    this._mapData = {};\r\n  };\r\n\r\n  $.update = function(){\r\n    \r\n    \r\n  };\r\n\r\n  $.loadMap = function(mapName) {\r\n    this._mapData = TCHE.maps[mapName];\r\n\r\n  };\r\n\r\n})(TCHE.declareClass('Map'));(function($){\r\n  \"use strict\";\r\n\r\n  var parent = TCHE.Character.prototype;\r\n\r\n  $.initialize = function(){\r\n    parent.initialize.call(this);\r\n  };\r\n\r\n  $.update = function(){\r\n    parent.update.call(this);\r\n\r\n    this.processInput();\r\n  };\r\n\r\n  $.processInput = function(){\r\n    var direction = TCHE.InputManager.getDirection();\r\n\r\n    if (!!direction) {\r\n      this.move(direction);\r\n    }\r\n  };\r\n})(TCHE.declareClass('Player', TCHE.Character));\r\n(function($){\r\n  \"use strict\";\r\n  var parent = TCHE.SceneMap.prototype;\r\n\r\n  $.initialize = function(params){\r\n    parent.initialize.call(this, params);\r\n  };\r\n\r\n  $.update = function(){\r\n    parent.update.call(this);\r\n\r\n  };\r\n\r\n\r\n  $.terminate = function(){\r\n    parent.terminate.call(this);\r\n  };\r\n})(TCHE.declareClass('SceneSample', TCHE.SceneMap));\r\n\n//# sourceMappingURL=tche-maker.js.map"]}